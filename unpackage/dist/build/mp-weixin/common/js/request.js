"use strict";var e=require("../vendor.js");var t={sendRequest:(t,o="GET",n={},r="application/json")=>{var i=e.index.getStorageSync("token");if(console.log("token status:"+i),null==i||""==i)throw e.index.showModal({title:"登录提示",content:"身份已过期，请重新登录后再来操作！",success:t=>{t.confirm&&e.index.redirectTo({url:"/pages/wechatLogin/wechatLogin"})}}),new Error("无法录入-因为没有登录");var a="Bearer "+e.index.getStorageSync("token")||"";return console.log("get Token:"+a),new Promise((function(i,s){e.index.request({url:t,data:n,method:o,header:{"Content-Type":r,Accept:"*/*",Authorization:a},success(t){if((t.header.authorization||t.header.Authorization)&&e.index.setStorageSync("token",t.header.authorization||t.header.Authorization),401===t.statusCode)e.index.showModal({title:"登录提示",content:"身份已过期，请重新登录后再来操作！",success:t=>{t.confirm&&e.index.redirectTo({url:"/pages/wechatLogin/wechatLogin"})}});else i(t)},fail(e){s(e)}})}))}};exports.http=t;
